<?xml version="1.0"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:vo="com.clarityenglish.practicalwriting.view.vo.*"
        width="80%" height="80%">

    <fx:Metadata>
        [HostComponent("com.clarityenglish.practicalwriting.view.zone.ZoneView")]
    </fx:Metadata>

    <fx:Script>
        <![CDATA[
        import com.clarityenglish.bento.vo.content.Unit;

        // gh#1294 Could also add function for showUnitInMenu - though not needed yet
            public function isUnitEnabled(unit:XML):Boolean {
                return Unit.unitEnabledInMenu(unit);
            }
        ]]>
    </fx:Script>

    <fx:Declarations>
        <s:DropShadowFilter id="dropShadowFilter" color="#989898" blurX="10" blurY="10" alpha="0.6" distance="0" angle="90" knockout="false"/>
    </fx:Declarations>

    <!-- states -->
    <s:states>
        <s:State name="disabled" />
        <s:State name="normal" />
        <s:State name="demo" />
    </s:states>

    <!--Background Rect-->
    <s:Rect top="70" left="15" right="15" height="100%" filters="{[dropShadowFilter]}">
        <s:fill>
            <s:SolidColor color="#FFFFFF" />
        </s:fill>
    </s:Rect>

    <!--Left column background-->
    <s:Rect top="70" left="15" height="100%" width="255">
        <s:fill>
            <s:SolidColor color="#EEEFF0" />
        </s:fill>
    </s:Rect>

    <!--Left column-->
    <s:VGroup left="5" width="{height > 640 ? 255 : 300}" height="80%" top="{height > 640 ? 130 : 110}" horizontalAlign="center" gap="{height > 640 ? 40 : 20}" scaleX="{height > 640 ? 1 : 0.85}" scaleY="{height > 640 ? 1 : 0.85}">
        <vo:PieChartButton id="pieChartButton" width="200" height="200" node="{hostComponent.course}" fillColor="{getStyle('pieChartFillColor')[hostComponent.course.childIndex()]}" bottomColor="{getStyle('pieChartBottomColor')[hostComponent.course.childIndex()]}" backgroundColor="#EEEFF0"/>

        <!-- Remove stats until we have a sensible number of data points
        <s:VGroup gap="10" horizontalAlign="center" >
            <s:Label id="minsExplanationLabel" fontSize="13" textAlign="center" width="70%" />
            <s:HGroup width="250" height="50" horizontalAlign="center" verticalAlign="top" gap="12">
                <s:Rect width="5" height="100%">
                    <s:fill>
                        <s:SolidColor color="{getStyle('pieChartFillColor')[hostComponent.course.childIndex()]}"/>
                    </s:fill>
                </s:Rect>
                <s:Label id="minsLabel" paddingTop="5" width="50" fontSize="20" fontFamily="Helvetica" textAlign="center" lineHeight="100%"/>
                <s:Rect id="midRect" width="2" height="40" visible="false" includeInLayout="false">
                    <s:fill>
                        <s:SolidColor color="{getStyle('pieChartFillColor')[hostComponent.course.childIndex()]}"/>
                    </s:fill>
                </s:Rect>
                <s:Label id="readLabel" paddingTop="5" width="80" fontSize="20" fontFamily="Helvetica" textAlign="center" lineHeight="100%"/>
                <s:Rect width="5" height="100%">
                    <s:fill>
                        <s:SolidColor color="{getStyle('pieChartFillColor')[hostComponent.course.childIndex()]}"/>
                    </s:fill>
                </s:Rect>
            </s:HGroup>
        </s:VGroup>
        -->

        <s:VGroup gap="10">
            <s:Label id="skillCaptionLabel" fontWeight="bold" fontFamily="Helvetica" fontSize="15"/>
            <s:Label id="skillContentLabel" fontSize="14" width="200" lineHeight="120%" />
        </s:VGroup>

        <s:SWFLoader id="priceBannerSWFLoader" source="@Embed(source='/skins/practicalwriting/assets/zone/priceBanner.png')" useHandCursor="true" buttonMode="true" includeIn="demo" />
    </s:VGroup>

    <s:TabbedViewNavigator id="zoneViewNavigator" top="112" bottom="60" left="270" right="15" creationPolicy="all">
        <s:ViewNavigator id="startOutViewNavigator" firstView="com.clarityenglish.practicalwriting.view.zone.StartOutZoneView" firstViewData="{hostComponent.course}" left="0" right="0" top="0" bottom="0" height="100%"
                         enabled="{isUnitEnabled(hostComponent.course.unit.(attribute('class') == 'startOut')[0])}"/>

        <s:ViewNavigator id="practiceZoneViewNavigator" firstView="com.clarityenglish.practicalwriting.view.zone.PracticeZoneView" firstViewData="{hostComponent.course}" left="0" right="0" top="0" bottom="0" horizontalCenter="0"
                         enabled="{isUnitEnabled(hostComponent.course.unit.(attribute('class') == 'learning')[0])}"/>

        <s:ViewNavigator id="resourcesViewNavigator" firstView="com.clarityenglish.practicalwriting.view.zone.ResourcesZoneView" firstViewData="{hostComponent.course}" left="0" right="0" top="0" bottom="0"
                         enabled="{isUnitEnabled(hostComponent.course.unit.(attribute('class') == 'resources')[0])}"/>
    </s:TabbedViewNavigator>

    <!--Back button-->
    <!-- <s:Button id="backButton" bottom="50" right="30" buttonMode="true" useHandCursor="true" /> -->

</s:Skin>
