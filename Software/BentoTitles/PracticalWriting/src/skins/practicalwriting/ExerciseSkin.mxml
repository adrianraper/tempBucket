<?xml version="1.0"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:view="com.clarityenglish.bento.view.*"
        xmlns:timer="com.clarityenglish.bento.view.timer.*"
        xmlns:ui="com.clarityenglish.practicalwriting.view.exercise.ui.*"
        xmlns:exercise="skins.practicalwriting.assets.exercise.*">

    <fx:Metadata>
        [HostComponent("com.clarityenglish.practicalwriting.view.exercise.ExerciseView")]
    </fx:Metadata>

    <fx:Declarations>
        <s:DropShadowFilter id="dropShadowFilter" color="#989898" blurX="10" blurY="10" alpha="0.6" distance="0" angle="90" knockout="false" inner="true"/>
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
        import com.clarityenglish.practicalwriting.view.progress.ProgressView;

        import mx.collections.XMLListCollection;
        ]]>
    </fx:Script>

    <!-- states -->
    <s:states>
        <s:State name="disabled" />
        <s:State name="normal" />

        <s:State name="exercise" />
        <s:State name="other" />
    </s:states>

    <s:layout>
        <s:BasicLayout />
    </s:layout>

    <s:Group id="exerciseGroup" right="0" left="0" top="0" bottom="0">
        <!--Header-->
        <s:Rect left="0" right="0" top="0" height="5">
            <s:fill>
                <s:SolidColor color="#FFD988" />
            </s:fill>
        </s:Rect>

        <!--Exercise Background-->
        <s:Group top="45" left="15" right="15" height="100%">
            <s:Rect left="0" right="0" height="100%">
                <s:fill>
                    <s:SolidColor color="#FFFFFF"/>
                </s:fill>
            </s:Rect>
        </s:Group>

        <!-- Exercise -->
        <view:DynamicView id="dynamicView" left="17" right="15" top="65" bottom="10" />

        <!--Exercise Left Bar-->
        <s:Rect width="20" left="-5" top="40" bottom="-5" filters="{[dropShadowFilter]}">
            <s:fill>
                <s:LinearGradient rotation="90">
                    <s:GradientEntry color="#FFFFFF" />
                    <s:GradientEntry color="#DBDBDB" />
                </s:LinearGradient>
            </s:fill>
        </s:Rect>

        <!--Exercise Right Bar-->
        <s:Rect width="20" right="-5" top="40" bottom="-5" filters="{[dropShadowFilter]}">
            <s:fill>
                <s:LinearGradient rotation="90">
                    <s:GradientEntry color="#FFFFFF" />
                    <s:GradientEntry color="#DBDBDB" />
                </s:LinearGradient>
            </s:fill>
        </s:Rect>

        <!--Button Bar background-->
        <s:Rect top="5" height="40 " left="0" right="0">
            <s:fill>
                <s:LinearGradient rotation="90">
                    <s:GradientEntry color="#FFFFFF" />
                    <s:GradientEntry color="#EDEBEB" />
                </s:LinearGradient>
            </s:fill>
        </s:Rect>

        <s:ToggleButton id="menuToggleButton" top="5" left="0" />

        <!--Unit Label-->
        <s:Label id="unitLabel" left="60" top="20" text="{hostComponent.selectedExerciseNode.parent().attribute('caption')}" fontSize="15" color="{getStyle('pieChartFillColor')[hostComponent.courseIndex]}" />

        <!-- Top Right Navigation Buttons -->
        <s:HGroup top="5" horizontalCenter="188" gap="1">
            <s:Button id="backButton" color="0x333333" fontSize="15" fontFamily="HelveticaMd" buttonMode="true"
                      useHandCursor="true" enabled="{!hostComponent.isFirstExercise}"
                      visible="{!hostComponent.isDirectStartEx}"/>
            <s:Button id="forwardButton" color="0x333333" fontSize="15" fontFamily="HelveticaMd" buttonMode="true"
                      useHandCursor="true" visible="{!hostComponent.isDirectStartEx}"/>
        </s:HGroup>

        <!-- Top Right Buttons -->
        <s:HGroup right="0" top="5" gap="1">
            <s:Button id="markingButton" color="0x333333" fontSize="15" fontFamily="HelveticaMd" buttonMode="true"
                      useHandCursor="true"/>
            <s:Button id="feedbackButton" visible="false" includeInLayout="false" color="0x333333" fontSize="15"
                      fontFamily="HelveticaMd" buttonMode="true" useHandCursor="true"/>
            <s:Button id="startAgainButton" color="0x333333" fontSize="15" fontFamily="HelveticaMd" buttonMode="true"
                      useHandCursor="true"/>
            <!--s:Button id="recorderButton" color="0x333333" fontSize="15" fontFamily="HelveticaMd" buttonMode="true"
                      useHandCursor="true"/-->
        </s:HGroup>

        <!--Top raw-->
        <s:Group top="0" left="310" width="272">
            <ui:WindowShade id="windowShade" top="47" width="272" height="304">
                <s:Rect width="272" height="543" top="0" bottom="0" bottomLeftRadiusX="8" bottomLeftRadiusY="8"
                        bottomRightRadiusX="8" bottomRightRadiusY="8" horizontalCenter="0">
                    <s:stroke>
                        <s:SolidColorStroke color="#497A7A" weight="6"/>
                    </s:stroke>
                    <s:fill>
                        <s:SolidColor color="#062E2E"/>
                    </s:fill>
                </s:Rect>
                <s:List id="unitList"
                        dataProvider="{new XMLListCollection(hostComponent.selectedExerciseNode.parent().parent().unit)}"
                        width="272" bottom="10" top="18" left="20" verticalScrollPolicy="on" scaleX="0.9" scaleY="0.9"
                        borderVisible="false" contentBackgroundAlpha="0">
                    <s:layout>
                        <s:VerticalLayout gap="10"/>
                    </s:layout>
                </s:List>
            </ui:WindowShade>
            <s:Group width="272" height="48">
                <exercise:dropDownMenu top="-5"/>
                <s:Label text="{hostComponent.selectedExerciseNode.@caption}" horizontalCenter="0" verticalCenter="0"
                         color="#FFFFFF" fontSize="15" fontFamily="Helvetica"/>
            </s:Group>
        </s:Group>

        <!--Timer-->
        <timer:TimerComponent bottom="0" width="100%" height="94" timerTotalTime="{hostComponent.timerTotalTime}" copyProvider="{hostComponent.copyProvider}" visible="{hostComponent.timerTotalTime.length > 0}" includeInLayout="{hostComponent.timerTotalTime.length > 0}" />

        <!--Footer-->
        <s:Rect left="0" right="0" bottom="0" height="5">
            <s:fill>
                <s:SolidColor color="#09789C" />
            </s:fill>
        </s:Rect>

    </s:Group>
</s:Skin>
