<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="onCreationComplete(event)">
    <!-- host component -->
    <fx:Metadata>
        [HostComponent("com.clarityenglish.bento.view.marking.MarkingView")]
    </fx:Metadata>
    <fx:Script>
		<![CDATA[
        import mx.collections.ArrayCollection;
        import mx.events.FlexEvent;

        [Bindable]
        private var markingCount:ArrayCollection;

        protected function onCreationComplete(event:FlexEvent):void
        {
            // TODO Auto-generated method stub
            if (hostComponent.exerciseMark) {
                markingCount = new ArrayCollection([{Count: hostComponent.exerciseMark.correctCount}, {Count: hostComponent.exerciseMark.incorrectCount}, {Count: hostComponent.exerciseMark.missedCount}]);
            }
        }

        ]]>
	</fx:Script>

    <s:states>
        <s:State name="disabled" />
        <s:State name="normal" />
    </s:states>

    <s:layout>
        <s:VerticalLayout />
    </s:layout>

    <s:Group id="content" width="492" height="320">
        <s:Rect top="5" left="0" width="100%" height="100%" radiusX="8" radiusY="8">
            <s:fill>
                <s:SolidColor color="#FFFFFF" alpha="0.8" />
            </s:fill>
        </s:Rect>

        <s:HGroup width="100%" height="220" top="5" left="26" verticalAlign="middle">
            <s:Group width="220" height="220">
                <mx:PieChart id="markingPieChart" width="100%" height="100%" paddingTop="10" dataProvider="{markingCount}" innerRadius="0.8">
                    <mx:series>
                        <mx:PieSeries field="Count" filters="{[]}" startAngle="-90" fills="{[getStyle('pieChartFillColor')[hostComponent.courseIndex], getStyle('pieChartBottomColor')[hostComponent.courseIndex], getStyle('pieChartBottomColor')[hostComponent.courseIndex]]}" renderDirection="clockwise"/>
                    </mx:series>
                </mx:PieChart>
                <s:HGroup horizontalCenter="0" verticalCenter="12" width="150" height="80" horizontalAlign="center" gap="-3">
                    <s:Label fontSize="76" color="{getStyle('pieChartFillColor')[hostComponent.courseIndex]}" text="{hostComponent.exerciseMark.correctPercent}" />
                    <s:Label paddingTop="45" fontSize="17" color="{getStyle('pieChartFillColor')[hostComponent.courseIndex]}" text="%"/>
                </s:HGroup>
            </s:Group>
            <s:VGroup height="100%" verticalAlign="middle" horizontalAlign="left" textAlign="left" paddingTop="20">
                <s:Label id="overallScoreLabel" fontSize="15" />
                <s:Label id="correctLabel" fontSize="15" />
                <s:Label id="wrongLabel" fontSize="15" />
                <s:Label id="missedLabel" fontSize="15" />
            </s:VGroup>
        </s:HGroup>

        <s:HGroup width="100%" horizontalAlign="center" bottom="30" gap="15">
            <s:Button id="tryAgainButton" height="40" width="102" useHandCursor="true" buttonMode="true" />
            <s:Button id="seeAnswersButton" height="40" width="130" useHandCursor="true" buttonMode="true" />
            <s:Button id="moveForwardButton" height="40" width="90" useHandCursor="true" buttonMode="true" />
        </s:HGroup>
    </s:Group>
</s:Skin>
