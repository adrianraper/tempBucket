<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" 
		xmlns:mx="library://ns.adobe.com/flex/mx"
		xmlns:login="skins.rotterdam.player.assets.login.*"
		xmlns:assets="skins.assets.*">

	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		.signInHeader {
			fontSize: 16;
			fontFamily: "Helvetica";
			fontWeight: "bold";
			color: #000000;
		}
		.signInPrompt {
			fontSize: 14;
		}
	</fx:Style>
	<!-- host component -->
	<fx:Metadata>
		[HostComponent("com.clarityenglish.bento.view.login.LoginView")]
	</fx:Metadata>
	
	<fx:Script>
		<![CDATA[
			import mx.core.FlexGlobals;
			import mx.events.FlexEvent;
			
			protected function onSoftKeyboardActivating(event:SoftKeyboardEvent):void {
				signInGroup.verticalCenter = registerGroup.verticalCenter = -70;
			}
			
			protected function onSoftKeyboardDeactivate(event:SoftKeyboardEvent):void {
				if (event.triggerType == SoftKeyboardTrigger.USER_TRIGGERED)
					signInGroup.verticalCenter = registerGroup.verticalCenter = 0;
			}
			
			protected var signInDetailsMargin:uint = 20;
			
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<s:GlowFilter id="glowFilter" alpha="0.60" blurX="8" blurY="8" color="#000000" knockout="true" quality="3" />
		<s:DropShadowFilter id="dropShadowFilter" blurX="6" blurY="6" alpha="0.5" distance="0" angle="180" knockout="false"/>
		<s:DropShadowFilter id="dropShadowFilter2" blurX="6" blurY="6" alpha="0.5" distance="0" angle="180" knockout="false" inner="true"/>
	</fx:Declarations>
	
	<!-- states -->
	<s:states>
		<s:State name="normal" />
		<s:State name="register" />
		<s:State name="error" />
		<s:State name="disabled" />
	</s:states>
	
	<!-- shadow -->
	<s:Rect top="0" bottom="0" left="0" right="0" filters="{glowFilter}" >
		<s:fill>
			<s:SolidColor color="0x808080" />
		</s:fill>
	</s:Rect>
	
	<!-- background gh#224 -->
	<s:Rect top="0" bottom="0" left="0" right="0" visible="{!hostComponent.branding}" includeInLayout="{!hostComponent.branding}">
		<s:fill>
			<s:LinearGradient rotation="90">
				<s:GradientEntry color="0xFFFFFF" ratio="0" />
				<s:GradientEntry color="0xFFFFFF" ratio="0.3" />
				<s:GradientEntry color="0xE6E6E6" ratio="0.6" />
				<s:GradientEntry color="0xE6E6E6" ratio="1" />
			</s:LinearGradient>
		</s:fill>
	</s:Rect>		

	<!-- top header -->
	<s:Rect left="0" right="0" top="0" height="40"  >
		<s:fill>
			<s:LinearGradient rotation="90">
				<s:GradientEntry color="0x4D4D4D" />
				<s:GradientEntry color="0x333333"  />
			</s:LinearGradient>
		</s:fill>
	</s:Rect>

	<!-- top header -->
	<s:Label text="{hostComponent.getCopyProvider().getCopyForId('licencedToName', {name: hostComponent.licenceeName})}" right="20" top="14" fontSize="13" color="0xFFFFFF" />
	
	<!-- gh#224 If it seems likely that more than 4 image components are needed, we should switch to a DataGroup and ItemRenderer -->
	<s:BitmapImage id="brandingImage1" visible="{hostComponent.branding}" includeInLayout="{hostComponent.branding}"/>
	<s:BitmapImage id="brandingImage2" visible="{hostComponent.branding}" includeInLayout="{hostComponent.branding}"/>
	<s:BitmapImage id="brandingImage3" visible="{hostComponent.branding}" includeInLayout="{hostComponent.branding}"/>
	<s:BitmapImage id="brandingImage4" visible="{hostComponent.branding}" includeInLayout="{hostComponent.branding}"/>
	<s:SWFLoader source="@Embed(source='/skins/rotterdam/player/assets/login/HoneyCones.png')" horizontalCenter="-260" top="330" visible="{!hostComponent.branding}" includeInLayout="{!hostComponent.branding}"/>
	<s:SWFLoader source="@Embed(source='/skins/rotterdam/player/assets/login/HoneyConesLarge.png')" horizontalCenter="250" top="360" visible="{!hostComponent.branding}" includeInLayout="{!hostComponent.branding}"/>
	<login:HoneyGraphic horizontalCenter="300" top="40" visible="{!hostComponent.branding}" includeInLayout="{!hostComponent.branding}"/>
	
	<!-- Sign in details -->
	<s:HGroup id="signInGroup" excludeFrom="register" horizontalCenter="0" verticalCenter="0" gap="20" >
		<s:SkinnableContainer includeInLayout="{hostComponent.allowLogin}" visible="{hostComponent.allowLogin}" >
			<s:VGroup paddingTop="{signInDetailsMargin}" paddingRight="{signInDetailsMargin}" paddingBottom="8" paddingLeft="{signInDetailsMargin}" 
					  horizontalAlign="center" gap="0" >
				<assets:loginlogoCE horizontalCenter="0" />
				<s:Rect height="10" /> <!-- this is a spacer -->
				<s:Label text="{hostComponent.loginCaption}" styleName="signInHeader"  />
				<s:Rect height="10" /> <!-- this is a spacer -->
				<s:TextInput id="loginKeyInput" prompt="{hostComponent.loginKeyCaption}" styleName="signInPrompt" width="260" height="35" filters="{dropShadowFilter2}" borderVisible="false"/>
				<s:Rect height="10" /> <!-- this is a spacer -->
				<s:VGroup visible="{hostComponent.verified}" includeInLayout="{hostComponent.verified}" >
					<s:TextInput id="passwordInput" displayAsPassword="true" prompt="{hostComponent.passwordCaption}" styleName="signInPrompt" width="260" height="35" filters="{dropShadowFilter2}" borderVisible="false"/>
					<s:Button id="forgotPasswordButton" label="{hostComponent.forgotPasswordCaption}" useHandCursor="true" buttonMode="true" />
				</s:VGroup>
				<s:Rect height="10" /> <!-- this is a spacer -->
				<s:Button id="loginButton" label="{hostComponent.loginButtonCaption}" />
				<s:VGroup width="100%" horizontalAlign="center" includeInLayout="{hostComponent.allowSelfRegister}" visible="{hostComponent.allowSelfRegister}" >
					<s:Line width="95%" includeInLayout="{hostComponent.allowSelfRegister}" visible="{hostComponent.allowSelfRegister}" >
						<s:stroke>
							<s:SolidColorStroke color="#999999" weight="1" caps="square"/>
						</s:stroke>
					</s:Line>
					<s:Rect height="10" /> <!-- this is a spacer -->
					<s:Button id="newUserButton" bottom="0" label="{hostComponent.newUserButtonCaption}"  
							  includeInLayout="{hostComponent.allowSelfRegister}" visible="{hostComponent.allowSelfRegister}" />
					<s:Rect height="10" /> <!-- this is a spacer -->
				</s:VGroup>
			</s:VGroup>
		</s:SkinnableContainer>
		<s:Group includeInLayout="{hostComponent.allowAnonymous}" visible="{hostComponent.allowAnonymous}" >
			<s:Label paddingTop="{signInDetailsMargin}" text="{hostComponent.orCaption}" styleName="signInHeader" />
		</s:Group>
		<s:SkinnableContainer includeInLayout="{hostComponent.allowAnonymous}" visible="{hostComponent.allowAnonymous}" >
			<s:VGroup paddingTop="{signInDetailsMargin}" paddingRight="{2*signInDetailsMargin}" paddingBottom="8" paddingLeft="{2*signInDetailsMargin}" 
					  horizontalAlign="center" gap="10">
				<assets:anonymousMask />
				<s:Rect height="10" /> <!-- this is a spacer -->
				<s:Label text="{hostComponent.anonymousCaption}" styleName="signInHeader"  />
				<s:Button id="anonymousStartButton" label="{hostComponent.anonymousStartButtonCaption}" />	
			</s:VGroup>
		</s:SkinnableContainer>
	</s:HGroup>
	
	<!-- self register screen -->
	<s:SkinnableContainer id="registerGroup" excludeFrom="normal" horizontalCenter="0" verticalCenter="0" >
		<s:VGroup paddingTop="{signInDetailsMargin}" paddingRight="{signInDetailsMargin}" paddingBottom="{signInDetailsMargin}" paddingLeft="{signInDetailsMargin}" 
				  horizontalAlign="center" gap="10">
			<assets:loginlogoCE horizontalCenter="0" />
			<s:Rect height="10" /> <!-- this is a spacer -->
			<s:Label text="{hostComponent.selfRegisterCaption}" fontSize="16" fontFamily="MyriadPro" fontWeight="bold" color="0x125558" />
			<s:TextInput id="selfRegisterName" prompt="{hostComponent.selfRegisterNameCaption}" 
						 includeInLayout="{hostComponent.selfRegisterNameCaption != null}" visible="{hostComponent.selfRegisterNameCaption != null}"
						 styleName="signInPrompt" width="260" height="35" filters="{dropShadowFilter2}" borderVisible="false"/>
			<s:TextInput id="selfRegisterId" prompt="{hostComponent.selfRegisterIdCaption}"
						 includeInLayout="{hostComponent.selfRegisterIdCaption != null}" visible="{hostComponent.selfRegisterIdCaption != null}"
						 styleName="signInPrompt" width="260" height="35" filters="{dropShadowFilter2}" borderVisible="false"/>
			<s:TextInput id="selfRegisterEmail" prompt="{hostComponent.selfRegisterEmailCaption}" 
						 includeInLayout="{hostComponent.selfRegisterEmailCaption != null}" visible="{hostComponent.selfRegisterEmailCaption != null}"
						 styleName="signInPrompt" width="260" height="35" filters="{dropShadowFilter2}" borderVisible="false"/>
			<s:TextInput id="selfRegisterPassword" displayAsPassword="true" prompt="{hostComponent.selfRegisterPasswordCaption}" 
						 includeInLayout="{hostComponent.verified}" visible="{hostComponent.verified}"
						 width="260" height="35" styleName="signInPrompt" filters="{dropShadowFilter2}" borderVisible="false"/>
			<s:TextInput id="confirmPassword" displayAsPassword="true" prompt="{hostComponent.confirmPasswordCaption}" 
						 includeInLayout="{hostComponent.verified}" visible="{hostComponent.verified}" 
						 width="260" height="35" styleName="signInPrompt" filters="{dropShadowFilter2}" borderVisible="false"/>
			<s:Rect height="10" /> <!-- this is a spacer -->
			<s:HGroup>
				<s:Button id="cancelButton" label="{hostComponent.cancelButtonCaption}" left="10" bottom="0"/>
				<s:Button id="addUserButton" label="{hostComponent.addUserButtonCaption}" right="10" bottom="0"/>
			</s:HGroup>
		</s:VGroup>
	</s:SkinnableContainer>
	
	<s:BitmapImage source="@Embed(source='/skins/rotterdam/player/assets/login/CCBLogo.png')" horizontalCenter="0" bottom="100" visible="{!hostComponent.branding}" includeInLayout="{!hostComponent.branding}" />
</s:Skin>
