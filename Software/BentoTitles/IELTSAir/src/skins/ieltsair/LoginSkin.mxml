<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009"
		xmlns:s="library://ns.adobe.com/flex/spark"
		xmlns:mx="library://ns.adobe.com/flex/mx"
		xmlns:login="skins.ieltsair.assets.login.*" creationComplete="onCreationComplete(event)">
	<!-- host component -->
	<fx:Metadata>
		[HostComponent("com.clarityenglish.ielts.view.login.LoginView")]
	</fx:Metadata>
	
	<fx:Declarations>
		<s:DropShadowFilter id="dropShadowFilter" angle="250" distance="1" color="0xB3B3B3" blurX="1.5" blurY="1.5" alpha="0.8" />
	</fx:Declarations>
	
	
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			
			// gh#659
			protected function onCreationComplete(event:FlexEvent):void
			{
				// TODO Auto-generated method stub
				var versionTitleArray:Array = [{caption: "Academic", code: "52"}, {caption: "General Training", code: 53}];
				if (IPLoginButtonBar) {
					if (IPLoginButtonBar.visible == true) {
						IPLoginButtonBar.dataProvider = new ArrayCollection(versionTitleArray);
						IPLoginBg.visible = true;
						loginBg.visible = false;
					} else {
						IPLoginBg.visible = false;
						loginBg.visible = true;
					}
				}									
			}
			
			protected function onForgotPasswordClick(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				var substTags:Object = { productCode: hostComponent.config.productCode };
				if (hostComponent.config.rootID)
					substTags.rootID = hostComponent.config.rootID; 
				substTags.loginOption = (isNaN(hostComponent.loginOption)) ? '' : hostComponent.loginOption;
				var urlReq:URLRequest = new URLRequest(hostComponent.getCopyProvider().getCopyForId("forgotPasswordLink", substTags ));
				navigateToURL(urlReq, "_new");
			}
			
		]]>
	</fx:Script>
	
	<s:states>
		<s:State name="disabled" />
		<s:State name="normal" />
		
		<s:State name="login" stateGroups="loginStates, normalLoginStates" />
		<s:State name="loginConcurrentTracking" stateGroups="loginStates, normalLoginStates" />
		<s:State name="loginIPConcurrentTracking" stateGroups="loginStates,IPStates" />
		<s:State name="register" stateGroups="registerStates" />
		<s:State name="registerConcurrentTracking" stateGroups="registerStates" />
		<s:State name="registerIPConcurrentTracking" stateGroups="registerStates,IPStates" />
		<s:State name="registerError" stateGroups="registerStates" />
	</s:states>
	
	<login:IELTSLoginLogo left="48" top="60" />
	
	<s:SWFLoader source="@Embed(source='/skins/ieltsair/assets/login/rtiv2_login.png')" top="158" right="48"  />
	
	<s:Group>
		<s:Group includeIn="normalLoginStates">
			<login:InputAreaChrome left="19" top="183" />
			<s:Button id="normalLoginForgotPasswordButton" top="330" left="220" click="onForgotPasswordClick(event)" useHandCursor="true" buttonMode="true" />
			<s:SWFLoader source="@Embed(source='/skins/ieltsair/assets/login/test_drive.png')" top="463" left="27" />
			<s:Label id="testDriveLabel" top="485" left="218" width="340" color="0x592A0C" fontWeight="bold" fontSize="16" />
			<s:Button id="testDriveAcademicButton" label="Academic" left="190" top="520" width="100" height="44" fontSize="16" />
			<s:Button id="testDriveGeneralButton" label="General Training" left="300" top="520" width="160" height="44" fontSize="16" />
		</s:Group>		
		
		<!--<s:Label text="Login with the details you have been given by your school. You can't purchase Road to IELTS through the App Store yet." top="217" left="73" width="340" />-->
		<s:Group top="183" left="45" includeIn="IPStates">
			<s:Group id="IPLoginBg">
				<login:ACBg visible="{IPLoginButtonBar.selectedIndex == 0}" filters="{[dropShadowFilter]}" />
				<login:GTBg visible="{IPLoginButtonBar.selectedIndex == 1}" filters="{[dropShadowFilter]}" />
			</s:Group>
			<login:loginBg id="loginBg" filters="{[dropShadowFilter]}" top="25" />	
		</s:Group>
		
		<s:Group top="183" left="45" includeIn="loginIPConcurrentTracking">
			<s:Label id="option1TitleLabel" top="60" left="25" fontWeight="bold" fontSize="16" color="0x174A7D" />
			<s:Label id="option1ContentLabel" top="90" left="25" width="300" fontSize="12" color="0x666666" />			
		</s:Group>
		
		<s:Group includeIn="loginStates">
			<s:Label id="loginKey_lbl" left="73" left.loginIPConcurrentTracking="70" top="200" top.loginIPConcurrentTracking="313" text="{hostComponent.loginKey_lbl}" fontSize="16" />
			<s:TextInput id="loginKeyInput" left="73" left.loginIPConcurrentTracking="70" top="220" top.loginIPConcurrentTracking="333" width="300" width.loginIPConcurrentTracking="210"  />
			
			<!--<s:Label id="loginIDLabel" color="#333333" left="73" top="280" width="340" fontSize="14" />-->
			
			<s:Label id="passwordLabel" left="73" left.loginIPConcurrentTracking="70" top="270" top.loginIPConcurrentTracking="383" fontSize="16" />
			<s:TextInput id="passwordInput" left="73" left.loginIPConcurrentTracking="70" top="290" top.loginIPConcurrentTracking="403" width="300" width.loginIPConcurrentTracking="210" displayAsPassword="true" />
			
			<s:Button id="loginButton" left="73" left.loginIPConcurrentTracking="285" top="335" top.loginIPConcurrentTracking="403" height="44" height.loginIPConcurrentTracking="35" fontSize="12" width="{(hostComponent.selfRegister) ? 140 : 120}" />
		</s:Group>
		
		<s:Button id="accountMoreButton" top="394" left="46" includeIn="normalLoginStates"/>
		
		<s:Group top.IPStates="240" left.IPStates="110" includeIn="registerStates">
			<s:Label id="RegisterOption1Label" fontSize="16" color="0x0C436B" fontWeight="bold" paddingTop="20" includeIn="registerStates"/>
			<s:VGroup paddingTop="40" id="registerBlock" width="100%" includeIn="registerStates">
				<s:Label id="registerDetailLabel" 
						 text.registerConcurrentTracking="This is the first time you have used the program, click New user to confirm." 
						 width="100%" fontSize="13" color="0x000000" paddingTop="10" />
				<s:Spacer height="3" visible="{hostComponent.selfRegisterName}" includeInLayout="{hostComponent.selfRegisterName}"/>
				<s:VGroup id="nameGroup" visible="{hostComponent.selfRegisterName}" includeInLayout="{hostComponent.selfRegisterName}">
					<s:Label id="loginName_lbl" text="{hostComponent.loginName_lbl}" fontSize="16" paddingTop="6" />
					<s:TextInput id="loginNameInput" width="263" text="{hostComponent.savedName}"/>
				</s:VGroup>
				<s:Spacer height="3" visible="{hostComponent.selfRegisterID}" includeInLayout="{hostComponent.selfRegisterID}" />
				<s:VGroup id="idGroup" visible="{hostComponent.selfRegisterID}" includeInLayout="{hostComponent.selfRegisterID}">
					<s:Label id="loginID_lbl" text="{hostComponent.loginID_lbl}" fontSize="16" paddingTop="6" />
					<s:TextInput id="loginIDInput" width="263" text="{hostComponent.savedName}"/>
				</s:VGroup>
				<s:Spacer height="3" visible="{hostComponent.selfRegisterEmail}" includeInLayout="{hostComponent.selfRegisterEmail}" />
				<s:VGroup id="emailGroup" visible="{hostComponent.selfRegisterEmail}" includeInLayout="{hostComponent.selfRegisterEmail}">
					<s:Label id="loginEmail_lbl" text="{hostComponent.loginEmail_lbl}" fontSize="16" paddingTop="6" />
					<s:TextInput id="loginEmailInput" width="263" left="500" text="{hostComponent.savedName}" />
				</s:VGroup>
				<s:Spacer height="3" visible="{hostComponent.verified}" includeInLayout="{hostComponent.verified}" />
				<s:VGroup id="passwordGroup" visible="{hostComponent.verified}" includeInLayout="{hostComponent.verified}">
					<s:Label text="{hostComponent.loginPassword_lbl}" fontSize="16" paddingTop="6" />
					<s:TextInput id="newPasswordInput" displayAsPassword="true" width="263" text="{hostComponent.savedPassword}" />
				</s:VGroup>
				<s:Spacer height="10" />
				<s:HGroup>
					<s:Button id="addUserButton" label="New user" />
					<s:Button id="cancelButton" label="Cancel" />
				</s:HGroup>
			</s:VGroup>
		</s:Group>
		
		
		<s:Group top="183" left="45" includeIn="loginIPConcurrentTracking">
			<login:dotLine top="275" left="25" />			
			<s:Label id="option2TitleLabel" top="310" left="25" fontWeight="bold" fontSize="16" color="0x174A7D" />
			<s:Label id="option2ContentLabel" top="340" left="25" width="210" fontSize="12" color="0x666666" />
			<s:Button id="IPLoginStartButton" top="335" left="240" width="120" height="35" fontSize="18"/>
		</s:Group>
		<s:ButtonBar id="IPLoginButtonBar" top="183" left="45" visible="{hostComponent.getIPMatchedProductCodes().length > 1}" labelField="caption" requireSelection="true" includeIn="IPStates" />
	</s:Group>	
	
	
	<!--gh#659-->
	<!--s:Group includeIn="loginIPConcurrentTracking" top="183" left="45">
		<s:Group id="IPLoginBg">
			<login:ACBg visible="{IPLoginButtonBar.selectedIndex == 0}" filters="{[dropShadowFilter]}" />
			<login:GTBg visible="{IPLoginButtonBar.selectedIndex == 1}" filters="{[dropShadowFilter]}" />
		</s:Group>
		<login:loginBg id="loginBg" filters="{[dropShadowFilter]}" top="25" />
		
		<s:Label id="option1TitleLabel" top="60" left="25" fontWeight="bold" fontSize="16" color="0x174A7D" />
		<s:Label id="option1ContentLabel" top="90" left="25" width="300" fontSize="12" color="0x666666" />
		
		<s:Label id="IPLoginKey_lbl" top="130" left="25" text="{hostComponent.IPLoginKey_lbl}" fontSize="16" />
		<s:TextInput id="IPLoginKeyInput" top="150" left="25" width="210" />
		
		<s:Label id="IPPasswordLabel" top="200" left="25" fontSize="16" />
		<s:TextInput id="IPPasswordInput" top="220" left="25" width="210" displayAsPassword="true" />		
		<s:Button id="IPLoginButton" left="240" top="220" height="35" fontSize="18" width="{(hostComponent.selfRegister) ? 140 : 120}" />
		
		<login:dotLine top="275" left="25" />
		
		<s:Label id="option2TitleLabel" top="310" left="25" fontWeight="bold" fontSize="16" color="0x174A7D" />
		<s:Label id="option2ContentLabel" top="340" left="25" width="210" fontSize="12" color="0x666666" />
		<s:Button id="IPLoginStartButton" top="335" left="240" width="120" height="35" fontSize="18"/>
		
		<s:ButtonBar id="IPLoginButtonBar" visible="{hostComponent.getProductCodes().length > 1}" labelField="caption" requireSelection="true" />
	</s:Group-->
		
	<login:BritishCouncilLoginLogo bottom="0" />
	<login:GreyCirclesLogin bottom="0" right="0" />
	<!-- #479 -->
	<s:Label text="v{hostComponent.parentApplication.versionNumber}" color="#AAAAAA" right="3" bottom="52"/>
	
	<!--Rate Button-->
	<s:Button id="longRateButton" right="50" top="70" buttonMode="true" useHandCursor="true"/>
	
</s:Skin>