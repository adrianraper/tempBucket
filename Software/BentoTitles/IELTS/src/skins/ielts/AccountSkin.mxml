<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" 
		xmlns:mx="library://ns.adobe.com/flex/mx">
	<!-- host component -->
	<fx:Metadata>
		[HostComponent("com.clarityenglish.ielts.view.account.AccountView")]
	</fx:Metadata>
	
	<fx:Script>
		<![CDATA[
			import com.clarityenglish.common.vo.manageable.User;
			private function formatExamDetails(userDetails:User, type:String):void {
				// Split into separate date and time
				if (userDetails.birthday) {
					var thisDate:String = userDetails.birthday;
				} else if (userDetails.expiryDate) {
					thisDate = userDetails.expiryDate;
				} else {
					thisDate = "2012-04-01 09:00";				
				}
				examDate.text = thisDate.substr(0, 10);;
				examTime.text = thisDate.substr(11, 5);
				
			}
		]]>
	</fx:Script>
	
	<s:layout>
		<s:VerticalLayout paddingTop="5" />
	</s:layout>
	
	<s:VGroup width="100%" paddingTop="20" >
		<s:Label text="My Account" fontSize="20" width="100%" />
		
		<s:Rect left="100" right="0" top="200" bottom="0" width="100%" height="1" >
			<s:fill>
				<s:SolidColor color="0x999999" />
			</s:fill>
		</s:Rect>

		<s:Spacer height="3" />
		<s:Label text="You have 30 days until your program expires." fontWeight="bold" fontSize="12" width="100%" />	
		<s:Spacer height="3" />
		<s:HGroup width="100%" height="100%" top="120" >
			<s:Label text="Registered name:" />
			<s:Label text="{hostComponent.userDetails.fullName}" fontWeight="bold" />
		</s:HGroup>
		<s:Spacer height="1" />

		<s:HGroup width="100%" height="100%" top="120">
			<s:Label text="Email:"/>
			<s:Label text="{hostComponent.userDetails.email}" fontWeight="bold" />
		</s:HGroup>
		<s:Spacer height="1" />

		<s:HGroup width="100%" height="100%" top="120">
			<s:Label text="Expiry date:"/>
			<s:Label text="{hostComponent.userDetails.expiryDate}" fontWeight="bold"/>
		</s:HGroup>
		<s:Spacer height="1" />

		<s:HGroup width="100%" height="100%" top="120">
			<s:Label text="Current password:" />
			<s:TextInput id="currentPassword" width="180" />
		</s:HGroup>
		<s:Spacer height="1" />
		
		<s:HGroup width="100%" height="100%" top="120">
			<s:Label text="New password:" />
			<s:TextInput id="newPassword" width="180" />
		</s:HGroup>
		<s:Spacer height="1" />

		<s:HGroup width="100%" height="100%" top="120">
			<s:Label text="Re-type new:" />
			<s:TextInput id="confirmPassword" width="180" />
		</s:HGroup>
		<s:Spacer height="1" />

		<s:HGroup width="100%" height="100%" top="120">
			<s:Label text="Your exam date:" />
			<s:TextInput id="examDate" text="{formatExamDetails(hostComponent.userDetails, 'date')}" width="180" />
		</s:HGroup>
		<s:Spacer height="1" />
		
		<s:HGroup width="100%" height="100%" top="120">
			<s:Label text="and time:" />
			<s:TextInput id="examTime" text="{formatExamDetails(hostComponent.userDetails, 'time')}" width="180" />
		</s:HGroup>
		<s:Spacer height="1" />

		<s:Button id="saveChangesButton" label="Save changes" />

	</s:VGroup>
	
</s:Skin>