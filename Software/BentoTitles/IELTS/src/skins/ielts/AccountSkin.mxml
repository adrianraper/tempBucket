<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" 
		xmlns:mx="library://ns.adobe.com/flex/mx">
	<!-- host component -->
	<fx:Metadata>
		[HostComponent("com.clarityenglish.ielts.view.account.AccountView")]
	</fx:Metadata>
	
	<fx:Script>
		<![CDATA[
			import com.clarityenglish.common.vo.manageable.User;
			private function formatExamDetails(userDetails:User, type:String):String {
				// Split into separate date and time
				if (userDetails.birthday) {
					var thisDate:String = userDetails.birthday;
				} else if (userDetails.expiryDate) {
					thisDate = userDetails.expiryDate;
				} else {
					thisDate = "2012-04-01 09:00";				
				}
				if (type=='date')
					return thisDate.substr(0, 10);
				if (type=='time')
					return thisDate.substr(11, 5);
				return '';
			}
		]]>
	</fx:Script>
	
	<s:layout>
		<s:HorizontalLayout paddingTop="5" />
	</s:layout>
	
	<s:VGroup width="60%" paddingTop="20" >
		<s:Label text="My Account" fontSize="20" width="50%" />
		
		<s:Rect left="100" right="0" top="180" bottom="0" width="100%" height="1" >
			<s:fill>
				<s:SolidColor color="0x999999" />
			</s:fill>
		</s:Rect>

		<s:Spacer height="10" />
		<s:Label text="You have 30 days until your program expires." fontWeight="bold" fontSize="12"/>
		
		<s:Spacer height="3" />
		
		<s:SWFLoader width="290" height="103"
					 source="@Embed(source='skins/ielts/assets/countdown.swf')">
		</s:SWFLoader>
		
		<s:Spacer height="10" />
		
		<s:HGroup width="100%" height="100%" top="120" >
			<s:VGroup width="110" height="100%" >
				<s:Label text="Registered name:" />
				<s:Spacer height="3" />
				<s:Label text="Email:"/>
				<s:Spacer height="3" />
				<s:Label text="Account start date:"/>		
				<s:Spacer height="3" />
				<s:Label text="Account expiry date:"/>		
				<s:Spacer height="3" />
				<s:Label text="Current password:" />
				<s:Spacer height="3" />
				<s:Label text="New password:" />
				<s:Spacer height="3" />
				<s:Label text="Confirm password:" />
				<s:Spacer height="3" />
				<s:Label text="Your exam date:" />
				<s:Spacer height="3" />
				<s:Label text="and time:" />
				<s:Spacer height="3" />

				
			</s:VGroup>
			<s:Spacer height="1" />
			
			<s:VGroup width="50%" height="100%" top="120" >
				<s:Label text="{hostComponent.userDetails.fullName}" fontWeight="bold" />
				<s:Spacer height="3" />
				<s:Label text="{hostComponent.userDetails.email}" fontWeight="bold" />
				<s:Spacer height="3" />
				<s:Label text="16th January 2012" fontWeight="bold"/>		
				<s:Spacer height="3" />
				<s:Label text="{hostComponent.userDetails.expiryDate}" fontWeight="bold"/>
				<s:Spacer height="3" />
				<s:TextInput id="currentPassword" width="180" />
				<s:Spacer height="3" />
				<s:TextInput id="newPassword"/>
				<s:Spacer height="3" />
				<s:TextInput id="confirmPassword" />
				<s:Spacer height="3" />
				<s:TextInput id="examDate" text="{formatExamDetails(hostComponent.userDetails, 'date')}" width="180" />
				<s:Spacer height="3" />
				<s:TextInput id="examTime" text="{formatExamDetails(hostComponent.userDetails, 'time')}" width="180" />
			</s:VGroup>
		</s:HGroup>
		<s:Spacer height="10" />
		<s:Button id="saveChangesButton" label="Save changes" />

	</s:VGroup>
	<s:VGroup width="40%" paddingTop="20" >
		<s:Label text="IELTS Apps" fontSize="20" width="50%" />
		
		<s:Rect left="100" right="0" top="180" bottom="0" width="100%" height="1" >
			<s:fill>
				<s:SolidColor color="0x999999" />
			</s:fill>
		</s:Rect>
		<s:Group width="240" height="300" >
			<s:SWFLoader source="@Embed(source='skins/ielts/assets/BandScoreCalculator-240.swf')" left="0" top="46" width="240" height="300" />
		</s:Group>
	</s:VGroup>
</s:Skin>