<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
				xmlns:s="library://ns.adobe.com/flex/spark" 
				xmlns:mx="library://ns.adobe.com/flex/mx" 
				autoDrawBackground="false" xmlns:layout="org.alivepdf.layout.*">
	
	<fx:Script>
		<![CDATA[
			import com.clarityenglish.common.model.interfaces.CopyProvider;
			
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			
			[Bindable]
			private var unitItemPieChartArrayCollection:ArrayCollection;
			
			private var _copyProvider:CopyProvider;
			
			[Bindable]
			public function get copyProvider():CopyProvider {
				return _copyProvider;
			}
			
			public function set copyProvider(value:CopyProvider):void {
				_copyProvider = value;
			}
			
			public override function set data(value:Object):void {
				super.data = value;
				
				if (data.@coverage == 0) {
					pieChart.visible = false;
				} else {
					pieChart.visible = true;
					unitItemPieChartArrayCollection = new ArrayCollection([{coverage: 100 - data.@coverage}, {coverage: data.@coverage}]);	
				}
				
				if (itemIndex < 9) {
					unitItemIndexLabel.text = "0" + String(itemIndex + 1);
				} else {
					unitItemIndexLabel.text = String(itemIndex + 1);
				}
			}
		]]>
	</fx:Script>
	
	<s:Group id="unitHGroup" left="0" top="0" height="70">
		<mx:PieChart id="pieChart" dataProvider="{unitItemPieChartArrayCollection}" width="45" left="0" verticalCenter="0">
			<mx:series>
				<mx:PieSeries field="coverage" labelPosition="none" filters="{[]}">
					<mx:fills>
						<s:SolidColor color="#FFFFFF" />
						<s:SolidColor color="#005D5F" />
					</mx:fills>
				</mx:PieSeries>
			</mx:series>
		</mx:PieChart>
		<s:Label id="unitItemIndexLabel" fontFamily="Helvetica" fontSize="18" color="#333333" left="42" verticalCenter="2" />
		<s:Group left="80" verticalCenter="0" >
			<s:Button id="unitItemLeftButton" height="100%" label="{copyProvider.getCopyForId(data.@leftIcon)}" left="0"/>
			<s:Label id="unitItemLeftLabel" text="{data.@leftIcon}" fontSize="20" left="40" verticalCenter="2" />
		</s:Group>
		<s:Group left="200" verticalCenter="0" >
			<s:Button id="unitItemRightButton" height="100%" label="{copyProvider.getCopyForId(data.@rightIcon)}" left="0"/>
			<s:Label id="unitItemRightLabel" text="{data.@rightIcon}" fontSize="20" left="42" verticalCenter="2" />
		</s:Group>							
	</s:Group>
	
</s:ItemRenderer>
