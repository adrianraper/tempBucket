<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="onCreationComplete(event)">
	<!-- host component -->
	<fx:Metadata>
		[HostComponent("com.clarityenglish.bento.view.marking.MarkingView")]
	</fx:Metadata>
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			
			[Bindable]
			private var markingCount:ArrayCollection;
			
			protected function onCreationComplete(event:FlexEvent):void
			{
				// TODO Auto-generated method stub
				if (hostComponent.exerciseMark) {
					markingCount = new ArrayCollection([{Count: hostComponent.exerciseMark.correctCount}, {Count: hostComponent.exerciseMark.incorrectCount}, {Count: hostComponent.exerciseMark.missedCount}]);
				}
			}
			
		]]>
	</fx:Script>

	<s:states>
		<s:State name="disabled" />
		<s:State name="normal" />
	</s:states>
	
	<s:layout>
		<s:VerticalLayout />
	</s:layout>
	
	<s:Group id="content" width="388" height="218">
		<s:Rect top="5" left="10" width="100%" height="100%" radiusX="8" radiusY="8">
			<s:fill>
				<s:SolidColor color="#FFFFFF" alpha="0.8" />
			</s:fill>
		</s:Rect>
		
		<s:HGroup top="5" left="30">
			<mx:PieChart id="markingPieChart" width="25%" height="35%" paddingTop="10" dataProvider="{markingCount}" innerRadius="0.55">
				<mx:series>
					<mx:PieSeries field="Count" filters="{[]}" fills="{getStyle('markingColours')}"/>
				</mx:series>
			</mx:PieChart>
			<s:VGroup height="160" verticalAlign="middle">
				<s:Label id="overallScore" text="You scored {hostComponent.exerciseMark.correctPercent}% in this exercise." fontSize="11" paddingLeft="-5" />
				<s:Spacer height="6"/>
				<s:Label text="Correct: {hostComponent.exerciseMark.correctCount}" fontSize="11" />
				<s:Label text="Incorrect: {hostComponent.exerciseMark.incorrectCount}" fontSize="11" />
				<s:Label text="Missed: {hostComponent.exerciseMark.missedCount}" fontSize="11" />
			</s:VGroup>
		</s:HGroup>
	
		<s:HGroup left="35" bottom="20" gap="15">
			<s:Button id="tryAgainButton" height="35" width="85" label="Try again" useHandCursor="true" buttonMode="true" />
			<s:Button id="seeAnswersButton" height="35" width="130" label="See answers" useHandCursor="true" buttonMode="true" />
			<s:Button id="moveForwardButton" height="35" width="90" label="Move forward" useHandCursor="true" buttonMode="true" />
		</s:HGroup>		
	</s:Group>
</s:Skin>
