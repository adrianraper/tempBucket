<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" 
		xmlns:mx="library://ns.adobe.com/flex/mx"
		xmlns:login="skins.clearpronunciation.assets.login.*" creationComplete="onCreationComplete(event)" xmlns:home="skins.clearpronunciation.assets.home.*">
	<!-- host component -->
	<fx:Metadata>
		[HostComponent("com.clarityenglish.rotterdam.view.login.LoginView")]
	</fx:Metadata>
	
	<fx:Script>
		<![CDATA[
			import mx.core.FlexGlobals;
			import mx.events.FlexEvent;
			
			private var _applicationHeight:Number;
			private var _applicationWidth:Number;
			
			[Bindable]
			public var applicationWidth:Number;
			
			[Bindable]
			public var applicationHeight:Number;
			
			protected function onCreationComplete(event:FlexEvent):void {
				applicationWidth = FlexGlobals.topLevelApplication.width;
				applicationHeight = FlexGlobals.topLevelApplication.height;
				
				loadingRect.visible = false;
			}
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<s:GlowFilter id="glowFilter" alpha="0.60" blurX="8" blurY="8" color="#000000" knockout="true" quality="3" />
		<s:DropShadowFilter id="dropShadowFilter" blurX="6" blurY="6" alpha="0.5" distance="0" angle="180" knockout="false"/>
		<s:DropShadowFilter id="dropShadowFilter2" blurX="6" blurY="6" alpha="0.5" distance="0" angle="180" knockout="false" inner="true"/>
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
			import flash.net.navigateToURL;
			
			protected function forgotPasswordHandler(event:MouseEvent):void {
				var substTags:Object = { productCode: hostComponent.config.productCode };
				if (hostComponent.config.rootID)
					substTags.rootID = hostComponent.config.rootID; 
				substTags.loginOption = (isNaN(hostComponent.loginOption)) ? '' : hostComponent.loginOption;
				var urlReq:URLRequest = new URLRequest(hostComponent.getCopyProvider().getCopyForId("forgotPasswordLink", substTags ));
				navigateToURL(urlReq, "_new");
			}
		]]>
	</fx:Script>
	
	<!-- states -->
	<s:states>
		<s:State name="disabled" />
		<s:State name="normal" />
	</s:states>
	
	<!--Login screen background-->
	<s:SWFLoader left="0" top="0" source="@Embed(source='skins/clearpronunciation/assets/home/homeBg.png')" />
	
	<!--Login screen logo-->
	<s:SWFLoader left="0" top="0" source="@Embed(source='skins/clearpronunciation/assets/login/loginLogo.png')" />
	
	<!--Login footer-->
	<s:Group left="0" top="{applicationHeight - 270 }">
		<home:homeFooter left="0" top="200" />
		<s:SWFLoader left="0" source="@Embed(source='skins/clearpronunciation/assets/login/loginGirl.png')" />
	</s:Group>
	
	
	<s:Group id="loginBoxGroup" width="410" height="287" left="{applicationWidth * 0.5 - 210}" top="{applicationHeight * 0.5 - 143}">
		<!-- gh#224 -->
		<s:Rect width="100%" height="100%" filters="{dropShadowFilter}" radiusX="20" radiusY="20" alpha="0.9">
			<s:fill>
				<s:SolidColor color="#263A45"/>
			</s:fill>
		</s:Rect>
		
		<s:Group width="400" horizontalCenter="0" verticalCenter="66">
			<s:VGroup horizontalAlign="center">
				<s:VGroup>
					<s:Spacer height="1" />
					<s:VGroup>
						<s:Label id="loginKey_lbl" fontSize="16" fontWeight="bold" fontFamily="MyriadPro" color="0xFFFFFF" text="{hostComponent.loginKey_lbl}"/>
						<s:TextInput id="loginKeyInput" fontSize="14" width="220" height="35" filters="{dropShadowFilter2}" borderVisible="false"/>
					</s:VGroup>
					<s:Spacer height="20" />
					<s:VGroup>
						<s:Label id="loginPassword_lbl" fontSize="16" fontWeight="bold" fontFamily="MyriadPro" color="0xFFFFFF" text="{hostComponent.loginPassword_lbl}" />
						<s:TextInput id="passwordInput" displayAsPassword="true" width="220" height="35" fontSize="14" fontWeight="bold" filters="{dropShadowFilter2}" borderVisible="false"/>
					    <s:VGroup paddingLeft="60">
							<s:Button id="forgotPassword_btn" fontWeight="normal" label="{hostComponent.forgotPassword_lbl}" click="forgotPasswordHandler(event)" useHandCursor="true" buttonMode="true" />
						</s:VGroup>					
					</s:VGroup>
					<s:Spacer height="10" />
				</s:VGroup>
				<s:Button id="loginButton" label="{hostComponent.getCopyProvider().getCopyForId('loginButton')}" />
				<s:Spacer height="30" />
				<login:ClarityEnglishLogo />
				<s:Label id="versionLabel" fontSize="12" color="#FFFFFF" />
				<s:Label id="copyrightLabel" fontSize="12" color="#FFFFFF" />
			</s:VGroup>
		</s:Group>
	</s:Group>
	
	<s:Rect id="loadingRect" width="100%" height="100%">
		<s:fill>
			<s:SolidColor color="#FFFFFF" />
		</s:fill>
	</s:Rect>
</s:Skin>
